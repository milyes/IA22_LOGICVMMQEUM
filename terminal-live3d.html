<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GEMINI CORE MASTER V7 – NETSECUREPRO</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            background:#000;
            color:#0f0;
            font-family:'Courier New', Courier, monospace;
            height:100vh;
            overflow:hidden;
            position:relative;
        }

        /* Matrix Rain */
        #matrix { position:fixed; inset:0; z-index:1; }

        /* Scanlines globales */
        .scanlines {
            position:fixed;
            inset:0;
            background:repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,255,65,0.06) 2px, rgba(0,255,65,0.06) 4px);
            pointer-events:none;
            z-index:9999;
            animation:scan 8s linear infinite;
            mix-blend-mode:overlay;
        }
        @keyframes scan { 0% { transform:translateY(-120%); } 100% { transform:translateY(120%); } }

        /* Terminal Layer */
        #terminal-layer {
            position:absolute;
            inset:0;
            z-index:20;
            padding:30px;
            background:rgba(0,0,0,0.92);
            transition:all 2s ease-in-out;
        }

        header {
            border-bottom:2px solid #0f0;
            padding-bottom:15px;
            margin-bottom:30px;
            display:flex;
            justify-content:space-between;
            font-size:1.3rem;
        }

        .sidebar {
            position:absolute;
            top:100px; right:30px;
            width:320px;
            background:rgba(0,20,0,0.85);
            border:1px solid #004411;
            padding:20px;
            z-index:25;
        }

        .metric {
            margin-bottom:15px;
            padding:12px;
            border:1px dashed #004411;
            font-size:0.95rem;
        }

        .terminal-log {
            height:55vh;
            overflow-y:auto;
            padding:15px;
            background:rgba(0,0,0,0.7);
            border:1px solid #004411;
            margin-bottom:30px;
            font-size:1.1rem;
            line-height:1.6;
        }

        .prompt-line {
            font-size:1.6rem;
            display:flex;
            align-items:center;
        }

        #cmd {
            background:transparent;
            border:none;
            color:#0f0;
            font:inherit;
            outline:none;
            width:70%;
            caret-color:#0f0;
        }

        .btn-core {
            margin:40px auto 0;
            padding:18px 60px;
            background:transparent;
            border:2px solid #0f0;
            color:#0f0;
            font-size:1.4rem;
            cursor:pointer;
            text-transform:uppercase;
            letter-spacing:3px;
        }
        .btn-core:hover { background:#0f0; color:#000; box-shadow:0 0 30px #0f0; }

        /* 3D Layer */
        #visual-layer {
            position:absolute;
            inset:0;
            opacity:0;
            z-index:5;
            transition:opacity 3s ease;
        }

        /* HUD Overlay */
        #ui-overlay {
            position:absolute;
            inset:0;
            z-index:15;
            pointer-events:none;
            opacity:0;
            transition:opacity 2.5s 1s ease;
            color:#0f0;
            font-size:0.9rem;
        }

        .hud-box {
            position:absolute;
            background:rgba(0,20,0,0.7);
            border:1px solid #004411;
            padding:12px 18px;
        }
        .hud-tl { top:20px; left:20px; }
        .hud-br { bottom:20px; right:20px; text-align:right; }

        /* Glitch Transition */
        .glitch-out {
            animation:glitch-dissolve 2s forwards;
        }
        @keyframes glitch-dissolve {
            0%   { transform:scale(1); filter:brightness(1); opacity:1; }
            50%  { transform:scale(1.08); filter:brightness(2) blur(2px); opacity:0.6; }
            100% { transform:scale(0.92); filter:brightness(0.3) blur(8px); opacity:0; }
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
</head>
<body>

    <canvas id="matrix"></canvas>
    <div class="scanlines"></div>

    <!-- Terminal Layer -->
    <div id="terminal-layer">
        <header>
            <div>
                <strong>NETSECUREPRO // NÉO_DZ</strong><br>
                GEMINI CORE 20.6 PRO V7
            </div>
            <div style="text-align:right;">
                ADMIN: ZOUBIROU MOHAMMED ILYES<br>
                ORCID: 0009-0007-7571-3178
            </div>
        </header>

        <div class="sidebar">
            <div class="metric"><strong>HANDLER ÉTHIQUE V1.1</strong><br>ACTIF – Hash validé</div>
            <div class="metric"><strong>GAIN AUC</strong> +15.0%</div>
            <div class="metric"><strong>REJET CLINIQUE</strong> 2.8%</div>
            <div class="metric"><strong>IPI LEAK</strong> 0.00%</div>
        </div>

        <div class="terminal-log" id="log">
            [16:57:30] NÉO_KERNEL BOOT INITIATED...<br>
            [16:57:31] Sceau Souverain chargé...<br>
            [16:57:32] Authentification... CONFIRMÉ<br>
            [16:57:33] Handler Éthique V1.1 → HASH VALIDATED<br>
            [16:57:37] Système prêt. En attente d'input.
        </div>

        <div class="prompt-line">
            root@neo-dz:~# <input type="text" id="cmd" placeholder="Entrez commande..." autofocus onkeydown="handleCommand(event)">
        </div>

        <center>
            <button class="btn-core" onclick="initCoreGravure()">INITIALISER GRAVURE 3D</button>
        </center>
    </div>

    <!-- 3D Visualization Layer -->
    <div id="visual-layer"></div>

    <!-- HUD Overlay -->
    <div id="ui-overlay">
        <div class="hud-box hud-tl">
            <strong>GEMINI CORE</strong><br>
            <small>STATUS: GRAVURE ACTIVE</small><br>
            <small>HASH: 7f8a9b8c7d6e5f4a1d2c3b4a5b2c1d6e</small>
        </div>
        <div class="hud-box hud-br">
            <button onclick="resetToTerminal()" style="background:transparent;border:1px solid #0f0;color:#0f0;cursor:pointer;padding:10px 20px;">
                RETOUR TERMINAL (ESC)
            </button>
        </div>
    </div>

    <script>
        // === MATRIX RAIN ===
        const canvas = document.getElementById('matrix');
        const ctx = canvas.getContext('2d');
        canvas.height = window.innerHeight;
        canvas.width = window.innerWidth;

        const chars = '01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン'.split('');
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);

        function drawMatrix() {
            ctx.fillStyle = 'rgba(0,0,0,0.04)';
            ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = '#0f0';
            ctx.font = fontSize + 'px monospace';
            for(let i = 0; i < drops.length; i++) {
                const text = chars[Math.floor(Math.random() * chars.length)];
                const x = i * fontSize;
                const y = drops[i] * fontSize;
                ctx.fillText(text, x, y);
                if(y > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            }
        }
        setInterval(drawMatrix, 45);

        window.addEventListener('resize', () => {
            canvas.height = window.innerHeight;
            canvas.width = window.innerWidth;
        });

        // === COMMAND HANDLER ===
        function handleCommand(e) {
            if(e.key === 'Enter') {
                const cmd = e.target.value.trim().toLowerCase();
                const log = document.getElementById('log');
                log.innerHTML += `<p>> ${e.target.value}</p>`;

                if(['start','init','core','gravure','breach','ia23'].includes(cmd)) {
                    initCoreGravure();
                } else if(cmd === 'help') {
                    log.innerHTML += `<p>Commandes : start, init, core, gravure, breach, ia23, clear, reset</p>`;
                } else if(cmd === 'clear') {
                    log.innerHTML = '';
                } else if(cmd === 'reset') {
                    resetToTerminal();
                } else {
                    log.innerHTML += `<p>Commande inconnue. Tapez help.</p>`;
                }

                e.target.value = '';
                log.scrollTop = log.scrollHeight;
            }
        }

        // === 3D CORE GRAVURE INIT ===
        let is3DActive = false;

        function initCoreGravure() {
            if(is3DActive) return;
            is3DActive = true;

            // Glitch transition
            const tl = document.getElementById('terminal-layer');
            tl.classList.add('glitch-out');

            // Show 3D & HUD
            document.getElementById('visual-layer').style.opacity = 1;
            document.getElementById('ui-overlay').style.opacity = 1;

            // Init Three.js
            const container = document.getElementById('visual-layer');
            const scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x000000, 0.001);

            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
            camera.position.z = 30;

            const renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            // Core Icosahedron (gravure style)
            const coreGeo = new THREE.IcosahedronGeometry(10, 1);
            const coreMat = new THREE.MeshBasicMaterial({
                color: 0x00ff41,
                wireframe: true,
                transparent: true,
                opacity: 0.7,
                wireframeLinewidth: 3
            });
            const core = new THREE.Mesh(coreGeo, coreMat);
            scene.add(core);

            // Inner glow
            const innerGeo = new THREE.IcosahedronGeometry(6, 2);
            const innerMat = new THREE.MeshBasicMaterial({color:0x88ff88, transparent:true, opacity:0.15});
            const inner = new THREE.Mesh(innerGeo, innerMat);
            scene.add(inner);

            // Rings (gravure orbits)
            const rings = [];
            for(let i=0; i<4; i++) {
                const r = 14 + i*5;
                const geo = new THREE.TorusGeometry(r, 0.08, 12, 80);
                const mat = new THREE.MeshBasicMaterial({color:0x0088ff, transparent:true, opacity:0.4});
                const ring = new THREE.Mesh(geo, mat);
                ring.rotation.x = Math.random() * Math.PI;
                ring.rotation.y = Math.random() * Math.PI;
                scene.add(ring);
                rings.push(ring);
            }

            // Animate
            function animate3D() {
                requestAnimationFrame(animate3D);
                core.rotation.y += 0.004;
                core.rotation.x += 0.002;
                inner.rotation.y -= 0.008;
                rings.forEach(r => r.rotation.y += 0.003);
                renderer.render(scene, camera);
            }
            animate3D();

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        function resetToTerminal() {
            document.getElementById('terminal-layer').classList.remove('glitch-out');
            document.getElementById('visual-layer').style.opacity = 0;
            document.getElementById('ui-overlay').style.opacity = 0;
            document.getElementById('visual-layer').innerHTML = '';
            is3DActive = false;
        }

        document.addEventListener('keydown', e => {
            if(e.key === 'Escape') resetToTerminal();
        });
    </script>
</body>
</html>
